{% extends 'layout.html' %}

{% block content %}
    <div style="margin: 5px;">
        <a href="/crm/depart/add/" class="btn btn-primary"><i class="fa fa-plus-circle" aria-hidden="true"></i> 添加</a>
    </div>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>ID</th>
                <th>名称</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody>
            {% for row in depart_queryset %}
                <tr>
                    <td>{{ row.id }}</td>
                    <td>{{ row.title }}</td>
                    <td>
                        <a href="/crm/depart/edit/{{ row.id }}/"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></a>
                        |
                        <a href="/crm/depart/del/{{ row.id }}/" style="color: red;">
{#                        <button class="del">#}
                             <i class="fa fa-trash-o" aria-hidden="true"></i>
{#                        </button>#}
{#                        <button type="button" class="btn btn-default btn-xs del "><span#}
{#                                            class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>#}

                        </a>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    <div class="bot">
        <nav aria-label="Page navigation">
            <ul class="pagination pagination-lg"
                style="float: right;margin-right: 50px;margin-top: 50px;">
                {{ page_html|safe }}
            </ul>
        </nav>
    </div>
{#    {% load staticfiles %}#}
{#    <script>#}
{#    // 找到删除按钮绑定事件#}
{#    $(".del").on("click", function () {#}
{#        var $trEle = $(this).parent().parent();#}
{#        var delId = $trEle.children().eq(0).text();#}
{#        swal({#}
{#                title: "你确定要删除吗？",#}
{#                text: "一旦删除就找不回来了哦",#}
{#                type: "warning",#}
{#                showCancelButton: true,#}
{#                confirmButtonClass: "btn-warning",#}
{#                confirmButtonText: "确认",#}
{#                cancelButtonText: "取消",#}
{#                closeOnConfirm: false,#}
{#                showLoaderOnConfirm: true#}
{#            },#}
{#            function () {#}
{#                // 向后端发送删除的请求#}
{#                $.ajax({#}
{#                    url: "/crm/depart/del/",#}
{#                    type: "post",#}
{#                    data: {"id": delId},#}
{#                    success: function (arg) {#}
{#                        swal(arg, "Del Successful", "success");#}
{#                        $trEle.remove();#}
{#                    }#}
{#                });#}
{#            });#}
{#    })#}
{#</script>#}
{% endblock %}